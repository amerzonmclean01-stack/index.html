<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Definitive Word - Premium Ebook Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (keep all existing CSS styles exactly as they are) ... */
        
        /* New interactive styles */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .enrollment-modal {
            max-width: 500px;
        }
        
        .program-benefits {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .enrollment-steps {
            display: flex;
            justify-content: space-between;
            margin: 25px 0;
            position: relative;
        }
        
        .enrollment-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #d69e2e;
            z-index: 1;
        }
        
        .step {
            text-align: center;
            position: relative;
            z-index: 2;
            background: #1a365d;
            padding: 10px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }
        
        .step.active {
            background: #d69e2e;
            color: #1a365d;
        }
        
        .step-label {
            margin-top: 10px;
            font-size: 0.8rem;
        }
        
        .enrollment-form {
            display: none;
        }
        
        .enrollment-form.active {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .success-message {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .success-message.active {
            display: block;
            animation: bounceIn 0.6s ease;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .workshop-modal {
            max-width: 600px;
        }
        
        .workshop-details {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .workshop-features {
            list-style: none;
            margin: 15px 0;
        }
        
        .workshop-features li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .workshop-features li:last-child {
            border-bottom: none;
        }
        
        .workshop-features i {
            color: #d69e2e;
        }
        
        .calendar-highlight {
            background: rgba(214, 158, 46, 0.3) !important;
            border: 2px solid #d69e2e !important;
        }
        
        .reading-progress {
            width: 100%;
            height: 4px;
            background: #e2e8f0;
            border-radius: 2px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #d69e2e;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .interactive-demo {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }
        
        .demo-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .shake {
            animation: shake 0.5s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <!-- ... (keep all existing HTML exactly as it is) ... -->

    <!-- New Interactive Modals -->
    <div class="edit-modal" id="enrollmentModal">
        <div class="modal-content enrollment-modal">
            <div class="modal-header">
                <h2 id="enrollmentTitle">Enroll in Program</h2>
                <button class="close-modal" onclick="closeEnrollmentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="enrollment-steps">
                    <div class="step active" id="step1">1</div>
                    <div class="step" id="step2">2</div>
                    <div class="step" id="step3">3</div>
                </div>
                <div class="step-label">
                    <span style="width: 33%; display: inline-block; text-align: center;">Program Info</span>
                    <span style="width: 33%; display: inline-block; text-align: center;">Your Details</span>
                    <span style="width: 33%; display: inline-block; text-align: center;">Confirmation</span>
                </div>
                
                <div class="enrollment-form active" id="enrollmentStep1">
                    <div class="program-benefits">
                        <h4 id="programName">Program Name</h4>
                        <p id="programDescription">Program description will appear here</p>
                        <div class="program-price" id="programPriceDisplay" style="text-align: center; font-size: 1.5rem; margin: 15px 0;"></div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn secondary" onclick="closeEnrollmentModal()">Cancel</button>
                        <button class="modal-btn primary" onclick="nextEnrollmentStep()">Continue</button>
                    </div>
                </div>
                
                <div class="enrollment-form" id="enrollmentStep2">
                    <form id="enrollmentForm">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" class="form-control" required id="enrollmentName">
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" class="form-control" required id="enrollmentEmail">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" class="form-control" required id="enrollmentPhone">
                        </div>
                        <div class="form-group">
                            <label>How did you hear about us?</label>
                            <select class="form-control" id="enrollmentSource">
                                <option value="">Select an option</option>
                                <option value="friend">Friend Referral</option>
                                <option value="social">Social Media</option>
                                <option value="search">Online Search</option>
                                <option value="event">Live Event</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </form>
                    <div class="modal-footer">
                        <button class="modal-btn secondary" onclick="prevEnrollmentStep()">Back</button>
                        <button class="modal-btn primary" onclick="nextEnrollmentStep()">Continue</button>
                    </div>
                </div>
                
                <div class="enrollment-form" id="enrollmentStep3">
                    <div class="success-message" id="enrollmentSuccess">
                        <i class="fas fa-check-circle" style="font-size: 4rem; color: #38a169; margin: 20px 0;"></i>
                        <h3>Enrollment Successful!</h3>
                        <p>Thank you for enrolling in <strong id="successProgramName">Program Name</strong>.</p>
                        <p>We've sent a confirmation email with program details and next steps.</p>
                        <div class="interactive-demo">
                            <p>ðŸŽ‰ <strong>Welcome to the community!</strong></p>
                            <p>Your journey to transformation begins now.</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn primary" onclick="closeEnrollmentModal()">Start Learning</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="edit-modal" id="workshopModal">
        <div class="modal-content workshop-modal">
            <div class="modal-header">
                <h2 id="workshopModalTitle">Workshop Registration</h2>
                <button class="close-modal" onclick="closeWorkshopModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="workshop-details">
                    <h4 id="workshopName">Workshop Name</h4>
                    <div class="workshop-meta">
                        <span><i class="far fa-calendar"></i> <span id="workshopDate">Date</span></span>
                        <span><i class="far fa-clock"></i> <span id="workshopTime">Time</span></span>
                        <span><i class="fas fa-users"></i> <span id="workshopSeats">Seats available</span></span>
                    </div>
                    <p id="workshopFullDescription">Workshop description will appear here.</p>
                    
                    <h5>What You'll Learn:</h5>
                    <ul class="workshop-features" id="workshopFeatures">
                        <!-- Features will be added dynamically -->
                    </ul>
                </div>
                
                <form id="workshopRegistrationForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>First Name</label>
                            <input type="text" class="form-control" required id="workshopFirstName">
                        </div>
                        <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" class="form-control" required id="workshopLastName">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" class="form-control" required id="workshopEmail">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" class="form-control" required id="workshopPhone">
                    </div>
                    <div class="form-group">
                        <label>Any questions or special requirements?</label>
                        <textarea class="form-control" id="workshopQuestions" rows="3"></textarea>
                    </div>
                </form>
                
                <div class="modal-footer">
                    <button class="modal-btn secondary" onclick="closeWorkshopModal()">Cancel</button>
                    <button class="modal-btn primary" onclick="registerForWorkshop()">
                        <i class="fas fa-ticket-alt"></i> Register Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ... (keep all existing JavaScript code exactly as it is) ...

        // New Interactive Variables
        let currentProgram = null;
        let currentWorkshop = null;
        let currentEnrollmentStep = 1;
        let readingProgress = 0;

        // Enhanced sample data with workshop details
        const workshopData = [
            {
                id: 1,
                title: "Prayer & Meditation Workshop",
                date: "Nov 9, 2023",
                time: "6:00 PM - 8:00 PM",
                seats: 15,
                description: "Learn powerful prayer techniques and meditation practices to deepen your spiritual connection.",
                fullDescription: "In this transformative workshop, you'll discover ancient and modern prayer techniques that can deepen your relationship with God. We'll explore various meditation practices from Christian traditions and learn how to incorporate them into your daily spiritual routine.",
                features: [
                    "5 different prayer techniques you can use daily",
                    "Guided meditation sessions",
                    "Practical tips for maintaining consistency",
                    "Q&A with experienced spiritual leaders",
                    "Take-home prayer guide"
                ]
            },
            {
                id: 2,
                title: "Biblical Financial Stewardship",
                date: "Nov 13, 2023",
                time: "10:00 AM - 12:00 PM", 
                seats: 20,
                description: "Discover God's principles for financial management and generosity.",
                fullDescription: "This workshop will transform your understanding of money from a biblical perspective. Learn how to manage your finances God's way and experience the freedom that comes with financial stewardship.",
                features: [
                    "Biblical principles of wealth management",
                    "Creating a God-honoring budget",
                    "The power of generosity and giving",
                    "Getting out of debt God's way",
                    "Financial planning for the future"
                ]
            },
            {
                id: 3, 
                title: "Marriage Enrichment Seminar",
                date: "Nov 20, 2023",
                time: "9:00 AM - 4:00 PM",
                seats: 12,
                description: "Strengthen your marriage through biblical principles and practical tools.",
                fullDescription: "Join us for this full-day seminar designed to strengthen marriages through biblical principles and practical relationship tools. Whether you're newlyweds or have been married for decades, this seminar will bring fresh life to your relationship.",
                features: [
                    "Communication skills that really work",
                    "Conflict resolution strategies",
                    "Keeping romance alive long-term",
                    "Financial harmony in marriage",
                    "Praying together as a couple"
                ]
            }
        ];

        // Program data
        const programData = {
            'spiritual-foundations': {
                name: 'Spiritual Foundations',
                description: '12-week beginner program to build a strong spiritual foundation',
                price: 1299,
                duration: '12 weeks',
                features: ['Weekly Bible study materials', 'Prayer journal template', '4 group coaching sessions', 'Access to online community']
            },
            'leadership-development': {
                name: 'Leadership Development', 
                description: '6-month intensive program for emerging Christian leaders',
                price: 4999,
                duration: '6 months',
                features: ['Advanced theological training', 'Mentorship from senior leaders', 'Practical ministry experience', 'Leadership certification']
            },
            'marriage-family': {
                name: 'Marriage & Family',
                description: '8-week program to strengthen family relationships',
                price: 2499, 
                duration: '8 weeks',
                features: ['Couples workbook', 'Weekly video sessions', 'Private counseling sessions', 'Family activity guides']
            }
        };

        // Enhanced initialization
        function initApp() {
            loadAllContent();
            displayBooks();
            setupNavigation();
            setupEditInteractions();
            loadCart();
            loadCommunityData();
            loadBlogData();
            initMinistrySection();
            updateCartDisplay();
            setupInteractiveElements();
            showNotification('ðŸŒŸ Welcome! Explore our interactive features - click around to see everything in action!');
        }

        // Setup all interactive elements
        function setupInteractiveElements() {
            setupTabNavigation();
            setupWorkshopInteractions();
            setupCalendarInteractions();
            setupReadingProgress();
            setupInteractiveDemos();
        }

        // Enhanced tab navigation
        function setupTabNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    
                    // Update active state
                    navLinks.forEach(nl => nl.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Scroll to section with smooth animation
                    document.getElementById(targetId).scrollIntoView({
                        behavior: 'smooth'
                    });
                    
                    // Add visual feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                    
                    // Show notification for certain sections
                    if (targetId === 'ministry') {
                        showNotification('âœ¨ Explore our ministry programs and life coaching services!', 3000);
                    } else if (targetId === 'books') {
                        showNotification('ðŸ“š Check out our latest book collection!', 2000);
                    }
                });
            });
        }

        // Enhanced enrollment functionality
        function enrollProgram(programId) {
            if (!currentUser) {
                showNotification('Please login to enroll in a program');
                toggleLogin(true);
                return;
            }
            
            currentProgram = programData[programId];
            if (!currentProgram) {
                showNotification('Program not found');
                return;
            }
            
            openEnrollmentModal();
        }

        function openEnrollmentModal() {
            const modal = document.getElementById('enrollmentModal');
            const title = document.getElementById('enrollmentTitle');
            const programName = document.getElementById('programName');
            const programDesc = document.getElementById('programDescription');
            const programPrice = document.getElementById('programPriceDisplay');
            const successProgram = document.getElementById('successProgramName');
            
            title.textContent = `Enroll in ${currentProgram.name}`;
            programName.textContent = currentProgram.name;
            programDesc.textContent = currentProgram.description;
            programPrice.textContent = `R${currentProgram.price}`;
            successProgram.textContent = currentProgram.name;
            
            // Reset to first step
            currentEnrollmentStep = 1;
            updateEnrollmentSteps();
            
            modal.classList.add('active');
        }

        function closeEnrollmentModal() {
            document.getElementById('enrollmentModal').classList.remove('active');
            currentProgram = null;
            currentEnrollmentStep = 1;
            updateEnrollmentSteps();
        }

        function updateEnrollmentSteps() {
            // Update step indicators
            for (let i = 1; i <= 3; i++) {
                const step = document.getElementById(`step${i}`);
                const form = document.getElementById(`enrollmentStep${i}`);
                
                if (i === currentEnrollmentStep) {
                    step.classList.add('active');
                    form.classList.add('active');
                } else {
                    step.classList.remove('active');
                    form.classList.remove('active');
                }
            }
        }

        function nextEnrollmentStep() {
            if (currentEnrollmentStep === 2) {
                // Validate form
                const name = document.getElementById('enrollmentName').value;
                const email = document.getElementById('enrollmentEmail').value;
                const phone = document.getElementById('enrollmentPhone').value;
                
                if (!name || !email || !phone) {
                    showNotification('Please fill in all required fields');
                    document.getElementById('enrollmentForm').classList.add('shake');
                    setTimeout(() => {
                        document.getElementById('enrollmentForm').classList.remove('shake');
                    }, 500);
                    return;
                }
            }
            
            if (currentEnrollmentStep < 3) {
                currentEnrollmentStep++;
                updateEnrollmentSteps();
                
                // If moving to final step, show success after delay
                if (currentEnrollmentStep === 3) {
                    setTimeout(() => {
                        document.getElementById('enrollmentSuccess').classList.add('active');
                    }, 500);
                }
            }
        }

        function prevEnrollmentStep() {
            if (currentEnrollmentStep > 1) {
                currentEnrollmentStep--;
                updateEnrollmentSteps();
            }
        }

        // Workshop functionality
        function setupWorkshopInteractions() {
            // Add click handlers to workshop register buttons
            document.querySelectorAll('.workshop-item .btn').forEach((btn, index) => {
                btn.addEventListener('click', function() {
                    if (!currentUser) {
                        showNotification('Please login to register for workshops');
                        toggleLogin(true);
                        return;
                    }
                    openWorkshopModal(index);
                });
            });
        }

        function openWorkshopModal(workshopIndex) {
            const workshop = workshopData[workshopIndex];
            if (!workshop) return;
            
            currentWorkshop = workshop;
            const modal = document.getElementById('workshopModal');
            const title = document.getElementById('workshopModalTitle');
            const name = document.getElementById('workshopName');
            const date = document.getElementById('workshopDate');
            const time = document.getElementById('workshopTime');
            const seats = document.getElementById('workshopSeats');
            const desc = document.getElementById('workshopFullDescription');
            const features = document.getElementById('workshopFeatures');
            
            title.textContent = `Register for ${workshop.title}`;
            name.textContent = workshop.title;
            date.textContent = workshop.date;
            time.textContent = workshop.time;
            seats.textContent = `${workshop.seats} seats available`;
            desc.textContent = workshop.fullDescription;
            
            // Clear and add features
            features.innerHTML = '';
            workshop.features.forEach(feature => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-check"></i> ${feature}`;
                features.appendChild(li);
            });
            
            modal.classList.add('active');
        }

        function closeWorkshopModal() {
            document.getElementById('workshopModal').classList.remove('active');
            currentWorkshop = null;
        }

        function registerForWorkshop() {
            const form = document.getElementById('workshopRegistrationForm');
            const firstName = document.getElementById('workshopFirstName').value;
            const lastName = document.getElementById('workshopLastName').value;
            const email = document.getElementById('workshopEmail').value;
            const phone = document.getElementById('workshopPhone').value;
            
            if (!firstName || !lastName || !email || !phone) {
                showNotification('Please fill in all required fields');
                form.classList.add('shake');
                setTimeout(() => {
                    form.classList.remove('shake');
                }, 500);
                return;
            }
            
            // Simulate registration process
            showNotification('Registering you for the workshop...');
            
            setTimeout(() => {
                closeWorkshopModal();
                showNotification(`âœ… Successfully registered for ${currentWorkshop.title}! Confirmation email sent.`, 5000);
                
                // Reset form
                form.reset();
            }, 2000);
        }

        // Calendar interactions
        function setupCalendarInteractions() {
            const calendarDates = document.querySelectorAll('.calendar-date.has-event');
            
            calendarDates.forEach(date => {
                date.addEventListener('click', function() {
                    // Remove previous highlights
                    document.querySelectorAll('.calendar-date').forEach(d => {
                        d.classList.remove('calendar-highlight');
                    });
                    
                    // Highlight clicked date
                    this.classList.add('calendar-highlight');
                    
                    // Find corresponding workshop
                    const dateText = this.textContent;
                    const workshopIndex = workshopData.findIndex(w => 
                        w.date.includes(dateText) || dateText === '9' || dateText === '13' || dateText === '20'
                    );
                    
                    if (workshopIndex !== -1) {
                        openWorkshopModal(workshopIndex);
                    }
                });
            });
        }

        // Reading progress simulation
        function setupReadingProgress() {
            const progressBar = document.createElement('div');
            progressBar.className = 'reading-progress';
            progressBar.innerHTML = '<div class="progress-bar" id="readingProgressBar"></div>';
            
            // Add to a few book cards as demo
            document.querySelectorAll('.book-card').forEach((card, index) => {
                if (index < 3) { // Only add to first 3 books
                    const clone = progressBar.cloneNode(true);
                    card.querySelector('.book-info').appendChild(clone);
                    
                    // Add click to simulate reading
                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.btn')) { // Don't trigger when clicking add to cart
                            simulateReading(this);
                        }
                    });
                }
            });
        }

        function simulateReading(bookCard) {
            const progressBar = bookCard.querySelector('.progress-bar');
            if (!progressBar) return;
            
            let progress = parseInt(progressBar.style.width) || 0;
            if (progress < 100) {
                progress += 25;
                if (progress > 100) progress = 100;
                progressBar.style.width = `${progress}%`;
                
                if (progress === 100) {
                    showNotification('ðŸŽ‰ You finished reading this book!', 3000);
                } else {
                    showNotification(`ðŸ“– Reading progress: ${progress}%`, 2000);
                }
            }
        }

        // Interactive demos
        function setupInteractiveDemos() {
            // Add demo buttons to ministry section
            const ministryCta = document.querySelector('.ministry-cta');
            const demoDiv = document.createElement('div');
            demoDiv.className = 'interactive-demo';
            demoDiv.innerHTML = `
                <h4>Try Our Interactive Features</h4>
                <div class="demo-buttons">
                    <button class="btn" onclick="showMinistryTour()">
                        <i class="fas fa-play"></i> Take a Tour
                    </button>
                    <button class="btn btn-secondary" onclick="simulateCoachingSession()">
                        <i class="fas fa-comments"></i> Demo Coaching
                    </button>
                </div>
            `;
            ministryCta.appendChild(demoDiv);
        }

        function showMinistryTour() {
            showNotification('ðŸš€ Starting ministry tour...', 2000);
            
            // Highlight different sections
            const sections = ['ministry-programs', 'life-coaching', 'ministry-books', 'workshop-calendar'];
            let current = 0;
            
            const tourInterval = setInterval(() => {
                if (current < sections.length) {
                    const section = document.querySelector(`.${sections[current]}`);
                    if (section) {
                        section.style.boxShadow = '0 0 0 3px #d69e2e';
                        section.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        
                        setTimeout(() => {
                            section.style.boxShadow = '';
                        }, 2000);
                    }
                    current++;
                } else {
                    clearInterval(tourInterval);
                    showNotification('ðŸŽŠ Tour completed! Explore each section in detail.', 4000);
                }
            }, 2500);
        }

        function simulateCoachingSession() {
            const questions = [
                "What area of your life would you like to improve?",
                "How can we support your spiritual growth journey?",
                "What challenges are you currently facing?",
                "What would success look like for you in 6 months?"
            ];
            
            let currentQuestion = 0;
            
            function askNextQuestion() {
                if (currentQuestion < questions.length) {
                    const response = prompt(questions[currentQuestion]);
                    if (response !== null) {
                        showNotification(`âœ“ Thank you for sharing: "${response.substring(0, 50)}..."`, 3000);
                        currentQuestion++;
                        setTimeout(askNextQuestion, 2000);
                    }
                } else {
                    showNotification('ðŸŽ¯ Based on your responses, we\'ve created a personalized coaching plan for you!', 5000);
                }
            }
            
            askNextQuestion();
        }

        // Enhanced coaching form submission
        function submitCoachingRequest(event) {
            event.preventDefault();
            
            // Add loading state
            const button = event.target.querySelector('button[type="submit"]');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            button.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                showNotification('âœ… Coaching request submitted! We will contact you within 24 hours.');
                document.getElementById('coachingForm').reset();
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Show confirmation animation
                event.target.classList.add('pulse');
                setTimeout(() => {
                    event.target.classList.remove('pulse');
                }, 1000);
            }, 2000);
        }

        // Enhanced payment processing
        function processPayment() {
            if (cart.length === 0) {
                showNotification('Your cart is empty!');
                return;
            }
            
            // Show processing animation
            const button = document.querySelector('#creditCardForm .btn');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing Payment...';
            button.disabled = true;
            
            // Simulate payment processing
            setTimeout(() => {
                cart = [];
                saveCart();
                updateCartDisplay();
                
                button.innerHTML = '<i class="fas fa-check"></i> Payment Successful!';
                button.style.background = '#38a169';
                
                showNotification('ðŸŽ‰ Payment successful! Thank you for your purchase. Your books are available for download.', 5000);
                
                // Reset button after delay
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                    button.style.background = '';
                }, 3000);
            }, 3000);
        }

        // Enhanced login functionality
        function performLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (email && password) {
                // Show loading state
                const button = document.querySelector('#loginModal .modal-btn.primary');
                const originalText = button.textContent;
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing in...';
                
                setTimeout(() => {
                    currentUser = { 
                        email, 
                        name: email.split('@')[0],
                        joined: new Date().toLocaleDateString()
                    };
                    
                    document.getElementById('loginBtn').innerHTML = `<i class="fas fa-user"></i> ${currentUser.name}`;
                    document.getElementById('createPostBtn').style.display = 'block';
                    
                    // Update login button in header
                    const loginBtn = document.getElementById('loginBtn');
                    loginBtn.innerHTML = `<i class="fas fa-user-check"></i> ${currentUser.name}`;
                    loginBtn.style.background = '#38a169';
                    
                    toggleLogin(false);
                    showNotification(`ðŸŽŠ Welcome back, ${currentUser.name}! You now have access to all features.`, 4000);
                    
                    // Reset button
                    button.textContent = originalText;
                }, 1500);
            } else {
                showNotification('Please enter both email and password');
            }
        }

        // ... (keep all other existing JavaScript functions) ...
    </script>
</body>
</html>
